<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>Code Nexus - æ•™å¸«å¾Œå°</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #f0f2f5; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #333; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, textarea, select { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }
        textarea { height: 100px; font-family: monospace; }
        button { width: 100%; padding: 12px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸ‘©â€ğŸ« å»ºç«‹æ–°æ•™æå–®å…ƒ</h2>
    
    <div class="form-group">
        <label>å–®å…ƒé †åº (ä¾‹å¦‚ 1, 2, 3)</label>
        <input type="number" id="unitOrder" value="1">
    </div>

    <div class="form-group">
        <label>å–®å…ƒæ¨™é¡Œ</label>
        <input type="text" id="unitTitle" placeholder="ä¾‹å¦‚ï¼šPython è¿´åœˆåŸºç¤">
    </div>

    <div class="form-group">
        <label>YouTube ID</label>
        <input type="text" id="youtubeId" placeholder="ä¾‹å¦‚ï¼šPqFKRqpHrjw">
    </div>

    <div class="form-group">
        <label>é‡é»æ‘˜è¦ (Summary)</label>
        <textarea id="summary" placeholder="å½±ç‰‡é‡é»..."></textarea>
    </div>

    <div class="form-group">
        <label>ç¯„ä¾‹ç¨‹å¼ç¢¼ (Code Example)</label>
        <textarea id="codeExample" placeholder="print('Hello')..."></textarea>
    </div>

    <div class="form-group">
        <label>ç‹€æ…‹</label>
        <select id="isActive">
            <option value="true">ğŸŸ¢ ç«‹å³ç™¼å¸ƒ (å­¸ç”Ÿå¯è¦‹)</option>
            <option value="false">ğŸ”´ å­˜ç‚ºè‰ç¨¿</option>
        </select>
    </div>

    <button onclick="saveUnit()">å„²å­˜å–®å…ƒ</button>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    // ============================================
    // â˜…â˜…â˜… è«‹åœ¨ä¸‹æ–¹è²¼ä¸Šæ‚¨çš„ Firebase Config â˜…â˜…â˜…
    // ============================================
    const firebaseConfig = {
          apiKey: "AIzaSyBgx03WUCJhe3ymWhecEYfiyShmcy9bCkg",
          authDomain: "code-a1ef3.firebaseapp.com",
          projectId: "code-a1ef3",
          storageBucket: "code-a1ef3.firebasestorage.app",
          messagingSenderId: "733626558270",
          appId: "1:733626558270:web:6d0ffcae5a5b329b212e6f",
          measurementId: "G-547WFQWRHZ"
    };

    // åˆå§‹åŒ– Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // å®šç¾©å„²å­˜å‡½å¼ (ç¶å®šåˆ° window è®“æŒ‰éˆ•å¯ä»¥å‘¼å«)
    window.saveUnit = async function() {
        const btn = document.querySelector('button');
        btn.innerText = "å„²å­˜ä¸­...";
        
        try {
            const docRef = await addDoc(collection(db, "units"), {
                order: Number(document.getElementById('unitOrder').value),
                title: document.getElementById('unitTitle').value,
                youtubeId: document.getElementById('youtubeId').value,
                summary: document.getElementById('summary').value,
                code: document.getElementById('codeExample').value,
                isActive: document.getElementById('isActive').value === 'true',
                createdAt: new Date()
            });
            alert("âœ… æˆåŠŸï¼å–®å…ƒ ID: " + docRef.id);
            btn.innerText = "å„²å­˜å–®å…ƒ";
        } catch (e) {
            console.error("Error adding document: ", e);
            alert("âŒ å„²å­˜å¤±æ•—ï¼Œè«‹çœ‹ Console");
        }
    }
</script>

</body>
</html>
